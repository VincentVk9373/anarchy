{"_id":"kC4u5DPvb06eO41n","name":"Lancer de dés Anarchy","type":"script","author":"hpG0HqTpAMeCLTP9","img":"icons/svg/dice-target.svg","scope":"global","command":"new Dialog({\n  title: \"Lancer de dés Anarchy\",\n  content: `<p>Donnez le nombre de dés à lancer</p>\n  <input name=\"macro-roll-count-dice\" type=\"number\" value=\"3\" />`,\n  buttons: {\n    cancel: { label: \"Annuler\", icon: '<i class=\"fas fa-times\"></i>' },\n    submit: {\n      label: \"Lancer\", icon: '<i class=\"fas fa-dice\"></i>',\n      callback: async html => {\n        const count = html.find('input[name=\"macro-roll-count-dice\"]').val();\n        const roll = new Roll(`${count}d6cs>4`);\n        await roll.evaluate({ async: true });\n        console.log('Rolled: ', roll);\n        const results = roll.terms[0].results;\n        const ones = results.filter(it => it.result == 1).length;\n        const flavor = `Lancer de ${count}d6, ${roll.total} Succès! ${ones} jets valant 1`;\n        const message = await roll.toMessage({ flavor: flavor }, { create: false });\n        ChatMessage.create(message);\n      }\n    }\n  }, default: \"submit\"\n}).render(true);","folder":null,"sort":0,"permission":{"default":0,"hpG0HqTpAMeCLTP9":3},"flags":{"core":{"sourceId":"Macro.kC4u5DPvb06eO41n"}}}
